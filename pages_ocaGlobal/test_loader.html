<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test del Sistema de Loader</title>
    <link href="css/administradorClientes.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <style>
        /* Asegurar que el loader se centre perfectamente */
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        .loader-overlay {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            z-index: 10000 !important;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h4><i class="fa fa-spinner"></i> Test del Sistema de Loader</h4>
                    </div>
                    <div class="card-body">
                        <p class="lead">Prueba las diferentes funciones del loader implementado:</p>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <button class="btn btn-success btn-block" onclick="testLoader('Guardando cliente...', 'Creando registro y estructura de carpetas')">
                                    <i class="fa fa-save"></i> Simular Guardar Cliente
                                </button>
                            </div>
                            <div class="col-md-6 mb-3">
                                <button class="btn btn-warning btn-block" onclick="testLoader('Actualizando cliente...', 'Guardando cambios en la base de datos')">
                                    <i class="fa fa-edit"></i> Simular Actualizar Cliente
                                </button>
                            </div>
                            <div class="col-md-6 mb-3">
                                <button class="btn btn-info btn-block" onclick="testLoader('Subiendo archivo...', 'Procesando archivo y subiendo a Google Drive')">
                                    <i class="fa fa-upload"></i> Simular Subir Archivo
                                </button>
                            </div>
                            <div class="col-md-6 mb-3">
                                <button class="btn btn-primary btn-block" onclick="testLoader('Creando plan de acción...', 'Guardando plan y creando estructura de carpetas')">
                                    <i class="fa fa-plus"></i> Simular Crear Plan
                                </button>
                            </div>
                            <div class="col-md-6 mb-3">
                                <button class="btn btn-secondary btn-block" onclick="testLoader('Cargando historial...', 'Obteniendo archivos del plan de acción')">
                                    <i class="fa fa-history"></i> Simular Cargar Historial
                                </button>
                            </div>
                            <div class="col-md-6 mb-3">
                                <button class="btn btn-danger btn-block" onclick="testLoader('Eliminando archivo...', 'Procesando eliminación del archivo')">
                                    <i class="fa fa-trash"></i> Simular Eliminar Archivo
                                </button>
                            </div>
                        </div>

                        <hr>
                        
                        <h5>Características del Loader:</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <i class="fa fa-check text-success"></i> 
                                <strong>Previene duplicidad:</strong> Deshabilita todos los botones durante la carga
                            </li>
                            <li class="list-group-item">
                                <i class="fa fa-check text-success"></i> 
                                <strong>Mensajes personalizados:</strong> Muestra mensajes específicos para cada operación
                            </li>
                            <li class="list-group-item">
                                <i class="fa fa-check text-success"></i> 
                                <strong>Diseño moderno:</strong> Overlay con blur y animaciones suaves
                            </li>
                            <li class="list-group-item">
                                <i class="fa fa-check text-success"></i> 
                                <strong>Responsive:</strong> Se adapta a diferentes tamaños de pantalla
                            </li>
                            <li class="list-group-item">
                                <i class="fa fa-check text-success"></i> 
                                <strong>Accesible:</strong> Indicadores visuales claros y texto descriptivo
                            </li>
                        </ul>

                        <div class="alert alert-info mt-4">
                            <h6><i class="fa fa-info-circle"></i> Instrucciones:</h6>
                            <p class="mb-0">Haz clic en cualquiera de los botones para simular una operación. El loader aparecerá por 3 segundos y luego desaparecerá automáticamente. Observa cómo todos los botones se deshabilitan durante la carga.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simular la clase AdministradorClientes para el test
        class LoaderTest {
            mostrarCargando(mostrar, mensaje = "Procesando...", subMensaje = "Por favor espere") {
                if (mostrar) {
                    // Evitar múltiples overlays
                    if (!document.getElementById("loader-overlay")) {
                        const overlay = document.createElement("div");
                        overlay.id = "loader-overlay";
                        overlay.className = "loader-overlay";
                        overlay.innerHTML = `
                            <div class="loader-container">
                                <div class="loader-spinner"></div>
                                <p class="loader-text">${mensaje}</p>
                                <p class="loader-subtext">${subMensaje}</p>
                            </div>
                        `;
                        document.body.appendChild(overlay);
                        
                        // Deshabilitar todos los botones de envío
                        this.deshabilitarBotones(true);
                    }
                } else {
                    const overlay = document.getElementById("loader-overlay");
                    if (overlay) {
                        overlay.remove();
                    }
                    
                    // Rehabilitar todos los botones de envío
                    this.deshabilitarBotones(false);
                }
            }

            deshabilitarBotones(deshabilitar) {
                const botones = document.querySelectorAll('button');
                botones.forEach(boton => {
                    if (deshabilitar) {
                        boton.disabled = true;
                        boton.classList.add('btn-loading');
                    } else {
                        boton.disabled = false;
                        boton.classList.remove('btn-loading');
                    }
                });
            }
        }

        const loaderTest = new LoaderTest();

        function testLoader(mensaje, subMensaje) {
            // Mostrar loader
            loaderTest.mostrarCargando(true, mensaje, subMensaje);
            
            // Simular operación asíncrona
            setTimeout(() => {
                loaderTest.mostrarCargando(false);
                
                // Mostrar mensaje de éxito
                Swal.fire({
                    icon: 'success',
                    title: 'Operación completada',
                    text: 'La operación se simuló correctamente',
                    timer: 2000,
                    showConfirmButton: false
                });
            }, 3000);
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
</html>
